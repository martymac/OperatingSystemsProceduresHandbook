== FreeBSD - GEOM et le chiffrement (geli)

https://www.freebsd.org/cgi/man.cgi?query=geli[`geli`] permet de
chiffrer les données d'un disque dur, d'une partition ou de tout autre
donnée. Une installation FDE (Full Disk Encryption) se fait via cet
outil sous FreeBSD. Il permet d'avoir de bonnes performances
comparé à GBDE.

.Chargement explicite du module kernel geom_eli
[sh]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
kldload geom_eli
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.Création d'un disque mémoire sur la heap (1GB)
[sh]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
MD=$(mdconfig -t malloc -s 1024m)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.Création d'une table de partition GPT
[sh]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
gpart create -s gpt ${MD}
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.Création d'une partition de type freebsd-ufs
[sh]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
PART=$(gpart add -t freebsd-ufs -i1 ${MD} | cut -d" " -f1)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.Initialisation et création d'une partition chiffrée eli
[sh]
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
geli init ${PART}
geli attach ${PART}
geli list
geli status
newfs /dev/${PART}.eli
geli detach ${PART}
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

 * https://www.freebsd.org/cgi/man.cgi?query=geli

